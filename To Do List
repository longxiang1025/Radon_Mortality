Regional Radon Model to-do list
1. Develop a shortened parameter table and list, consisting of 2 random forest, 2 neural network, 2 deep learning, 1 gam, 1 robust linear regression (8 models)
2. Develop a parameter table of bandwidth (25000 [25km], 100000 [100km], 200000[200km]) and number of neighbours selected [5000, 10000, 15000]
3. Combine these two tables together and get a combined table of 72 rows.
++ It seems that current solution: using all measurements from a zipcode as test and all other measurements as training, can lead to biased estimation in most cases. To address this, further division is unavoidable. That's a spatio-temporal ranfom forest.
1. Develop a prototype of spatial-temporal random forest model.
++ It seems that the current performance of spatio-temporal random forest is not that good. Current three parameters: (spatial/temporal ratio: 10000, relative decay in kernel: 2, number of neighbours: 5000), seems producing fine results in major metropolitan areas in New England and Midwest. However, there're some regions (lower left of Midwest and Northeastern PA) with high MAE and mean residual. The overall R2 in basement is 0.732^2, and R2 in upstiars is 0.667^2.
1. Change the parameter: increaes the relative decay in kernel to 4 from 2. This adjustment will give more weight to "closer" measurements.
2. Have a retrospecive look at the performance of general random forest model (1_135). Perhaps it has done well enough.
++ The overall R2 of the global random forest model (1_135) is 0.747^2. The R2 for basement is 0.746^2 and the R2 for upstairs is 0.727^2. After visually checking the MAE and ME, we can see a similar trend with the spatio-temporal random forest model. That's to say, a global random forest model has done a good job in addressing the geographical heteregenity. A spatiotemporal extension of random forest hasen't actually improve the model.
++ It seems that increasing d from 2 to 4 slightly changed the performance of the model. The overall R2 in basement is 0.727^2 and the overall R2 in upstairs is 0.65^2. Hold on, the size of test result is only 80% of the previous random forest model. Need to double check.
1. Restore the parameter back to 2, and decrease the spatial/temporal ratio from 10000 to 1000.
++ The overall R2 in the basement is 0.734^2, in aboveground floors is 0.687^2. Not significant improvement. The parameters of each random forest has been increased. So I don't think there's any need to tune the random forest models themselves. The next step is to lower the number of neightbours of each random forest model, and have look at the result.
1. Restore the parameter back to 10000, and set the number of neighbours to 1500.
++ The overall R2 in the basement is 0.736^2, in aboveground floors is 0.677^2. No significant improvement. It seems that the model is very stable no matter how I change the parameters, suggesting that a global random forest is optimal. A last try is to have a close eye on my code and make a final decision.
++ Fitting parameters, such as local R2 and top 10 important predictors should be saved.
++ After constraining the test dataset to be ZIP Codes with at least 10 measurements, the R2 is finally accepatable to be 0.83^2 (0.69). The next step is to think of visualization ideas and writing.
1. Prediction. Develop a local random forest model for each ZIP Code & Month, and make the prediction. 
++ Remove the two parameters related to gam model and redo the fitting and prediction.
++ After removing the two GAM-related predictors, the R2 for all >10 ZIPCode & Month pairs is 0.829^2 (0.69). Looks acceptable.
1. Figure 1: Maps of raw data (hex map) in basement and upstairs.
2. Figure 2: Flow chart of spatiotemporal random forest method.
3. Figure 3: Fitting plot of test dataset with at least 10 measurements per ZIP Code and Month.
4. Figure 4: Spatial distribution of MAE, MRE and the variable importance.
5. Figure 5: Multi-panel maps of predictions.
++ All coding works have been done. Write a manuscript as beautiful as the figures!
